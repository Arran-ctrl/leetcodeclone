<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LeetCode Clone</title>
  <!-- React + ReactDOM + Babel -->
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    .container { display: flex; gap: 20px; }
    .problems { width: 200px; }
    .editor { flex: 1; }
    textarea { width: 100%; height: 200px; }
    pre { background: #f5f5f5; padding: 10px; }
    button { margin-top: 8px; padding: 6px 12px; cursor: pointer; }
    h2 { margin-top: 0; }
  </style>
</head>
<body>
  <h1>Mini LeetCode Clone</h1>
  <div id="root"></div>

  <!-- React code -->
  <script type="text/babel" data-presets="react">
    const problems = [
      {
        id: 1,
        title: "Two Sum",
        description: "Given an array of numbers and a target, return indices of the two numbers that add up to the target.",
        starter: "function twoSum(nums, target) {\n  // write code here\n}\n"
      },
      {
        id: 2,
        title: "Reverse String",
        description: "Write a function that reverses a string.",
        starter: "function reverseString(s) {\n  // write code here\n}\n"
      }
    ];

    function App() {
      const [selected, setSelected] = React.useState(problems[0]);
      const [code, setCode] = React.useState(selected.starter);
      const [output, setOutput] = React.useState("");

      React.useEffect(() => {
        setCode(selected.starter);
        setOutput("");
      }, [selected]);

      const runCode = () => {
        try {
          // eslint-disable-next-line no-new-func
          const fn = new Function(code + "; return " + selected.title.replace(/\s/g, "").toLowerCase());
          const result = fn();
          setOutput("Ran successfully: " + result);
        } catch (e) {
          setOutput("Error: " + e.message);
        }
      };

      return (
        <div className="container">
          <div className="problems">
            <h2>Problems</h2>
            <ul>
              {problems.map(p => (
                <li key={p.id}>
                  <button onClick={() => setSelected(p)}>{p.title}</button>
                </li>
              ))}
            </ul>
          </div>
          <div className="editor">
            <h2>{selected.title}</h2>
            <p>{selected.description}</p>
            <textarea value={code} onChange={e => setCode(e.target.value)} />
            <br/>
            <button onClick={runCode}>Run</button>
            <pre>{output}</pre>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
